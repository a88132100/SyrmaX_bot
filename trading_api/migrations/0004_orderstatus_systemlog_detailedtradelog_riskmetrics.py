# Generated by Django 5.2.2 on 2025-08-14 08:26

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('trading_api', '0003_volatilitypausestatus'),
    ]

    operations = [
        migrations.CreateModel(
            name='OrderStatus',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(choices=[('PENDING', '待處理'), ('SUBMITTED', '已提交'), ('PARTIAL_FILLED', '部分成交'), ('FILLED', '完全成交'), ('CANCELLED', '已取消'), ('REJECTED', '被拒絕'), ('EXPIRED', '已過期')], max_length=20, unique=True, verbose_name='狀態代碼')),
                ('name', models.CharField(max_length=50, verbose_name='狀態名稱')),
                ('description', models.TextField(blank=True, verbose_name='狀態描述')),
            ],
            options={
                'verbose_name': '訂單狀態',
                'verbose_name_plural': '訂單狀態',
            },
        ),
        migrations.CreateModel(
            name='SystemLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('timestamp', models.DateTimeField(auto_now_add=True, verbose_name='時間戳')),
                ('level', models.CharField(choices=[('DEBUG', '調試'), ('INFO', '信息'), ('WARNING', '警告'), ('ERROR', '錯誤'), ('CRITICAL', '嚴重')], max_length=10, verbose_name='日誌級別')),
                ('category', models.CharField(choices=[('SYSTEM', '系統'), ('TRADING', '交易'), ('STRATEGY', '策略'), ('RISK', '風險'), ('EXCHANGE', '交易所'), ('DATABASE', '數據庫'), ('NETWORK', '網絡')], max_length=20, verbose_name='日誌類別')),
                ('message', models.TextField(verbose_name='日誌消息')),
                ('module', models.CharField(max_length=100, verbose_name='模組名稱')),
                ('function', models.CharField(max_length=100, verbose_name='函數名稱')),
                ('line_number', models.IntegerField(verbose_name='行號')),
                ('trading_pair', models.CharField(blank=True, max_length=20, null=True, verbose_name='交易對')),
                ('strategy_name', models.CharField(blank=True, max_length=100, null=True, verbose_name='策略名稱')),
                ('order_id', models.CharField(blank=True, max_length=100, null=True, verbose_name='訂單ID')),
                ('error_code', models.CharField(blank=True, max_length=50, null=True, verbose_name='錯誤代碼')),
                ('error_message', models.TextField(blank=True, null=True, verbose_name='錯誤信息')),
                ('stack_trace', models.TextField(blank=True, null=True, verbose_name='堆疊追蹤')),
                ('execution_time', models.FloatField(blank=True, null=True, verbose_name='執行時間(秒)')),
                ('memory_usage', models.FloatField(blank=True, null=True, verbose_name='內存使用(MB)')),
                ('cpu_usage', models.FloatField(blank=True, null=True, verbose_name='CPU使用率(%)')),
                ('exchange_name', models.CharField(blank=True, max_length=50, null=True, verbose_name='交易所名稱')),
                ('api_endpoint', models.CharField(blank=True, max_length=200, null=True, verbose_name='API端點')),
                ('response_time', models.FloatField(blank=True, null=True, verbose_name='響應時間(毫秒)')),
                ('tags', models.JSONField(blank=True, default=list, verbose_name='標籤')),
                ('severity', models.CharField(default='NORMAL', max_length=20, verbose_name='嚴重程度')),
            ],
            options={
                'verbose_name': '系統日誌',
                'verbose_name_plural': '系統日誌',
                'ordering': ['-timestamp'],
                'indexes': [models.Index(fields=['timestamp'], name='trading_api_timesta_a43123_idx'), models.Index(fields=['level', 'timestamp'], name='trading_api_level_57ed64_idx'), models.Index(fields=['category', 'timestamp'], name='trading_api_categor_cecb6a_idx'), models.Index(fields=['trading_pair', 'timestamp'], name='trading_api_trading_cf4d66_idx')],
            },
        ),
        migrations.CreateModel(
            name='DetailedTradeLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('strategy_name', models.CharField(max_length=100, verbose_name='策略名稱')),
                ('combo_mode', models.CharField(max_length=20, verbose_name='策略組合模式')),
                ('order_id', models.CharField(max_length=100, unique=True, verbose_name='內部訂單ID')),
                ('exchange_order_id', models.CharField(blank=True, max_length=100, null=True, verbose_name='交易所訂單ID')),
                ('order_status', models.CharField(max_length=20, verbose_name='訂單狀態')),
                ('side', models.CharField(max_length=4, verbose_name='交易方向')),
                ('order_type', models.CharField(default='MARKET', max_length=20, verbose_name='訂單類型')),
                ('entry_price', models.FloatField(verbose_name='開倉價格')),
                ('exit_price', models.FloatField(blank=True, null=True, verbose_name='平倉價格')),
                ('target_price', models.FloatField(blank=True, null=True, verbose_name='目標價格')),
                ('stop_loss_price', models.FloatField(blank=True, null=True, verbose_name='止損價格')),
                ('take_profit_price', models.FloatField(blank=True, null=True, verbose_name='止盈價格')),
                ('quantity', models.FloatField(verbose_name='訂單數量')),
                ('filled_quantity', models.FloatField(default=0.0, verbose_name='已成交數量')),
                ('remaining_quantity', models.FloatField(default=0.0, verbose_name='剩餘數量')),
                ('order_created_time', models.DateTimeField(auto_now_add=True, verbose_name='訂單創建時間')),
                ('order_submitted_time', models.DateTimeField(blank=True, null=True, verbose_name='訂單提交時間')),
                ('first_fill_time', models.DateTimeField(blank=True, null=True, verbose_name='首次成交時間')),
                ('last_fill_time', models.DateTimeField(blank=True, null=True, verbose_name='最後成交時間')),
                ('order_completed_time', models.DateTimeField(blank=True, null=True, verbose_name='訂單完成時間')),
                ('order_cancelled_time', models.DateTimeField(blank=True, null=True, verbose_name='訂單取消時間')),
                ('commission', models.FloatField(default=0.0, verbose_name='手續費')),
                ('slippage', models.FloatField(default=0.0, verbose_name='滑點成本')),
                ('notional_value', models.FloatField(verbose_name='名義價值')),
                ('realized_pnl', models.FloatField(default=0.0, verbose_name='已實現損益')),
                ('unrealized_pnl', models.FloatField(default=0.0, verbose_name='未實現損益')),
                ('leverage', models.FloatField(default=1.0, verbose_name='槓桿倍數')),
                ('margin_used', models.FloatField(default=0.0, verbose_name='保證金使用量')),
                ('margin_ratio', models.FloatField(default=0.0, verbose_name='保證金使用率')),
                ('risk_reward_ratio', models.FloatField(blank=True, null=True, verbose_name='風險收益比')),
                ('market_volatility', models.FloatField(blank=True, null=True, verbose_name='市場波動率')),
                ('atr_value', models.FloatField(blank=True, null=True, verbose_name='ATR值')),
                ('trend_strength', models.CharField(blank=True, max_length=20, null=True, verbose_name='趨勢強度')),
                ('signal_strength', models.FloatField(blank=True, null=True, verbose_name='信號強度')),
                ('signal_confidence', models.FloatField(blank=True, null=True, verbose_name='信號置信度')),
                ('multiple_signals', models.JSONField(blank=True, default=list, verbose_name='多策略信號')),
                ('execution_quality', models.CharField(default='NORMAL', max_length=20, verbose_name='執行質量')),
                ('execution_delay', models.FloatField(blank=True, null=True, verbose_name='執行延遲(毫秒)')),
                ('price_improvement', models.FloatField(default=0.0, verbose_name='價格改善')),
                ('error_code', models.CharField(blank=True, max_length=50, null=True, verbose_name='錯誤代碼')),
                ('error_message', models.TextField(blank=True, null=True, verbose_name='錯誤信息')),
                ('retry_count', models.IntegerField(default=0, verbose_name='重試次數')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='備註')),
                ('tags', models.JSONField(blank=True, default=list, verbose_name='標籤')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='創建時間')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新時間')),
                ('trading_pair', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='trading_api.tradingpair', verbose_name='交易對')),
            ],
            options={
                'verbose_name': '詳細交易日誌',
                'verbose_name_plural': '詳細交易日誌',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['trading_pair', 'created_at'], name='trading_api_trading_932f59_idx'), models.Index(fields=['strategy_name', 'created_at'], name='trading_api_strateg_499552_idx'), models.Index(fields=['order_status', 'created_at'], name='trading_api_order_s_8d55c6_idx'), models.Index(fields=['side', 'created_at'], name='trading_api_side_a0ed1d_idx')],
            },
        ),
        migrations.CreateModel(
            name='RiskMetrics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('timestamp', models.DateTimeField(auto_now_add=True, verbose_name='記錄時間')),
                ('position_size', models.FloatField(verbose_name='持倉大小')),
                ('position_value', models.FloatField(verbose_name='持倉價值')),
                ('margin_used', models.FloatField(verbose_name='保證金使用量')),
                ('margin_ratio', models.FloatField(verbose_name='保證金使用率')),
                ('leverage', models.FloatField(verbose_name='槓桿倍數')),
                ('current_price', models.FloatField(verbose_name='當前價格')),
                ('price_change_24h', models.FloatField(verbose_name='24小時價格變化')),
                ('volatility_24h', models.FloatField(verbose_name='24小時波動率')),
                ('atr_value', models.FloatField(verbose_name='ATR值')),
                ('max_position_size', models.FloatField(verbose_name='最大持倉大小')),
                ('max_daily_loss', models.FloatField(verbose_name='最大日虧損')),
                ('current_daily_loss', models.FloatField(verbose_name='當前日虧損')),
                ('risk_score', models.FloatField(verbose_name='風險評分')),
                ('risk_level', models.CharField(max_length=20, verbose_name='風險等級')),
                ('trading_pair', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='trading_api.tradingpair', verbose_name='交易對')),
            ],
            options={
                'verbose_name': '風險指標',
                'verbose_name_plural': '風險指標',
                'ordering': ['-timestamp'],
                'indexes': [models.Index(fields=['trading_pair', 'timestamp'], name='trading_api_trading_236d21_idx')],
            },
        ),
    ]
